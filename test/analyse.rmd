Analysis of Tabarnac optimization on IS
=======================================


```{r parsing ,echo=F}
library(ggplot2)
library(plyr)
data<-data.frame(read.csv2(file="results.csv",sep=',',dec='.'))
#str(data)
#show(data)
```

Setup
-----

+ Experiment executed 2015-06-20 on *graphene* cluster (g5k nancy).
+ Benchmarks: All NAS bench but *dc*, CLASS A

Expectations
-------------

Three groups:
+ Overhead factor > 30
    + *is* and *mg*
+ 5 < Overhead factor < 15
    +  *lu*,*ft*,*bt*
+ Overhead factor < 5
    + *cg*,*ep*,*ua*

Results similar to `perf_test_NAS_g5k_150620_1833`


Results
-------

###   Execution time

```{r ExecTime, echo=F}
stat<-ddply(data,c("Bench", "Class", "Type"),summarise,
            N=length(Time),mean=mean(Time),sd=sd(Time),se=sd/sqrt(N))
p  <- ggplot(stat,aes(x=Bench,y=mean, fill=Type))
#p  <- ggplot(stat,aes(x=Bench,y=speedup, fill=Type))
p  <-  p + geom_bar(stat="identity", position=position_dodge(.9) )
p  <-  p + geom_errorbar(aes(ymin=mean-se, ymax=mean+se),
                  width=.2,                    # Width of the error bars
                  position=position_dodge(.9))
#p  <- p + facet_grid(Balancing ~ Interleave)
p <- p + xlab("Benchmark")
p <- p + ylab("Exec time (s)")
p <- p + guides(fill=guide_legend(title="Execution type"))
# BW theme
#p <- p + theme_bw()
p <-  p + theme(panel.grid.minor = element_line(colour = "black", linetype="dashed", size = 0.1),
        panel.grid.major = element_line(colour = "black", size = 0.1),
        legend.position="bottom")
#p <- p + scale_fill_grey()
#p <- p+ theme(legend.position="none")
show(p)

```

### Slowdown Factor

```{r Slowdown, echo=F}
norm_vect <- rep(subset(data, data$Type=="Base")$Time,each=2)
#show(norm_vect)
data$slowdown <- data$Time / norm_vect
stat<-ddply(data,c("Bench", "Class", "Type"),summarise,
            N=length(slowdown),mean=mean(slowdown),sd=sd(slowdown),se=sd/sqrt(N))
p  <- ggplot(stat,aes(x=Bench,y=mean, fill=Type))
#p  <- ggplot(stat,aes(x=Bench,y=speedup, fill=Type))
p  <-  p + geom_bar(stat="identity", position=position_dodge(.9) )
p  <-  p + geom_errorbar(aes(ymin=mean-se, ymax=mean+se),
                  width=.2,                    # Width of the error bars
                  position=position_dodge(.9))
#p  <- p + facet_grid(Balancing ~ Interleave)
p <- p + xlab("Benchmark")
p <- p + ylab("Slowdown factor")
p <- p + guides(fill=guide_legend(title="Execution type"))
# BW theme
#p <- p + theme_bw()
p <-  p + theme(panel.grid.minor = element_line(colour = "black", linetype="dashed", size = 0.1),
        panel.grid.major = element_line(colour = "black", size = 0.1),
        legend.position="bottom")
#p <- p + scale_fill_grey()
#p <- p+ theme(legend.position="none")
show(p)
#ggsave("figure/ExecutionTime.pdf", width=4, height=4)
```

Detailed Values:

```{r DetailledValues, echo=F}
show(stat)
```

Conclusions
-----------

## Comparison between benchmarks

## Comparison to other tools

The same experiment was run for tabarnac:

<img src="./tabarnac_ovh.png", alt="tabarnac_ovh" /, width=500, height=500>

# Todo

+ Compare with MemProf

```{r free, echo=F}
remove(p)
remove(stat)
remove(data)
remove(norm_vect)
```
